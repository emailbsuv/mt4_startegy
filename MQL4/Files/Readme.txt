0. Копируем папку MQL4 из релиза в папку терминала МТ4.

1. Редактируем файл settings.txt 

1500 5 contests.txt 0 0.5 3.0 "InstaForex-1Demo.com"

Первая цифра - количество баров, вторая цифра - глубина баров при оптимизации в блоке параметров каждого символа в файле contests.txt (влияет на общее время оптимизации), третий параметр - имя файла конфига в текущей папке, четвёртый параметр - сдвиг во вемени (баров) - используется в оптимизаторе и тестере, пятый параметр - коэффициент умножения для стопов (используется в TesterStart.bat, MarketTrader.mq4) ,шестой параметр - коэффициент умножения для тейков (используется в TesterStart.bat, MarketTrader.mq4) , седьмой параметр - название папки с файлами котировок в папке history каталога МТ4.

2. Редактируем файл contests.txt

GBPCHF
15 16 168 75 7 43201 69 0 6 22 33 11 24 155 200
30 22 74 80 12 86402 94 0 5 22 33 11 24 155 200
60 19 155 178 42 172803 322 0 5 22 33 11 24 155 200
240 17 91 69 30 172804 227 0 5 22 33 11 24 155 200
1440 19 133 120 92 432005 697 1 5 22 33 11 24 155 200

Первая строчка - имя символа из "Обзор рынка" в МТ4, последующие строчки состоят из: первая цифа - таймфрейм, вторая-третья-четвёртая - ставим 0 - периоды Ma1, Ma2, CCI для сделок buy (оптимизатор установит нужные значения Ma1,Ma2,CCI), пятая цифра 0 (профит для sell сделок в пунктах расчитывает оптимизатор), шестая цифра - время последней открытой сделки в секундах( используется только в MarketTrader.mq4), седьмая цифра 0 (зарезервирована для будущих версий), восьамя цифра 0 (количество убыточных сделок), девятая цифра 0 (количество прибыльных сделок), десятая цифра 0 (stoploss для sell сделок в пунктах расчитывает оптимизатор), одинадцатая цифра 0 (stoploss для buy сделок в пунктах расчитывает оптимизатор), двенадцатая цифра 0 (профит для buy сделок в пунктах расчитывает оптимизатор), тринадцатая-четынадцатая-пятнадцатая цифра 0 - периоды Ma1, Ma2, CCI для сделок sell (оптимизатор установит нужные значения Ma1,Ma2,CCI).

Между блоками параетров каждого символа обязателен переход на новую строку. В конце файла переход на новую строку ставить не надо. Формат файла строгий.

3. Устанавливаем в МТ4 на любой график индикатор UpdateBars.mq4, ждём 3 минуты пока подгрузится история, удаляем индикатор с графика, закывае терминал и открываем снова (чтобы сохранились котировки на диск).

4. Запускаем MarketTraderOptimizerStart.bat, ждём час-два пока не появится надпись ...minutes used (обновится файл contests.txt). Закрываем консоль.

5. Запускаем SniperStart.bat, ждём 2-3 секунды пока не появится надпись ...minutes used (обновится файл sniper.txt). Появится файл sniper.txt предназначенный для ручных сделок (ручная торговля). Закрываем консоль.

6. Устанавливаем в МТ4 на любой график с тайрейом М5 советник MarketTrader.mq4. Сделки при перерывах в работе советник подхватывает только свои.

7. Оптимизацию для таймфемов меньших М30 нужно делать два раза в сутки через равные промежутки времени. Для Н1-Н4 - раз в двое суток. Для D1 - раз в неделю. Время оптимизации регулируется параметром 2 в файле settings.txt

8. Пункт 8 опциональный (можно выполнять или нет) - не используется в торговле. Этот пункт для того чтобы быстро оценить результаты торговли без использования мониторинговых сервисов в интернете и не ждать месяцами результатов. Чтобы использовать эту возожность быстрой оценки результатов необходимо прописать 4-й пункт в settings.txt в 200 баров (к примеру), сохранить файл и запустить оптимизатор. После завершения работы оптимизатора пропатчится файл contests.txt в соответствии со сдвигом в прошлое время истории на 200 баров. После этого необходимо запустить TesterStart.bat - создастся файл tester.txt, в котором будет результат торговли за 200 баров без учёта сдвига времени в прошлое, т.е. проверится как ведёт себя MarketTrader.mq4 на новых котировках. В результате тестирования в tester.txt создаются строчки "15 GBPJPY 25 24 2 1 405", первый - таймфрейм, второй - валюта, третий - пункты убытка, четвёртый - пункты профита, пятый - колво прибыльных сделок, шестой - количество убыточных сделок, седьмой - среднее время сделки в минутах. Ещё момент: в settings.txt количество баров (первый параметр) должно быть не меньше баров сдвига времени (четвёртый параметр ) + 300 баров. Пример 2300 5 contests.txt 2000 "Alpari-Pro.ECN" . 300 баров идёт первый CCI - для первой сделки. В settings.txt количество баров (первый параметр) не должен быть больше 50000 и больше чем баров в истории (можно посмотреть индикатором UpdateBars.mq4 - третий столбец).

9. Порядок тестирования:
9.0.1 Закачать архивы валют по файлу contests.txt (валюты и таймфреймы).
9.1. Поправляем файлы settings.txt , contests.txt.
9.1.1.  В settings.txt  первый параметр в 1300 , четвёртый параметр в 200, пятый-шестой параметр подбираем в пределах 0.2-3.0 (после оптимизации перед тестированием).
9.1.2. UpdateBars.mq4 на график в мт4, ждём 3 минуты, перезапускаем mt4.
9.2. Запускаем MarketTraderOptimizerStart.bat, ждём все расчёты около часа-двух.
9.3. Запускаем TesterStart.bat.
9.4. Файл ...RESULTS.txt отправляем в телеграм автора: @markettraderoptimizer для обмена и сравнения результатов.

10. Порядок работы:
10.1. Поправляем файлы settings.txt , contests.txt.
10.1.1.  В settings.txt  первый параметр в 2000 , четвёртый параметр в 0, пятый-шестой параметр подбираем в пределах 0.2-3.0 (после оптимизации перед тестированием, затем смотрим по результатам тестирования и оставляем самые подходящие).
10.1.2. UpdateBars.mq4 на график в мт4, ждём 3 минуты, перезапускаем mt4.
10.2. Запускаем MarketTraderOptimizerStart.bat, ждём все расчёты около часа-двух.
10.3. Кладём на график MarketTrader.mq4.
10.4. Наслаждаемся результатом торговли в профит.

Телеграм автора: @markettraderoptimizer

Свежая версия пограммного комплекса MarketTrader https://github.com/emailbsuv/mt4_startegy/releases